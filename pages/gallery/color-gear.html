<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Colored gear</title>
	<link href="https://fonts.googleapis.com/css?family=Lato:100,300,400,700,900" rel="stylesheet">
    <link rel="stylesheet" href="../../css/main.css">
</head>
<body>
    <div class="canvas__wrapper">
		<canvas class="canvas__wrapper-canvas"></canvas>
		<div class="canvas__wrapper-link">
			<a href="" class="prev">&#9001;</a>
		</div>
		<header class="canvas__wrapper-info">
			<h1>some text</h1>
		</header>
	</div>
	


<script>

//Initial Setup

var canvas = document.querySelector('canvas');
var ctx = canvas.getContext('2d');

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

//Variables 

var mouse = {
	x: innerWidth/2,
	y: innerHeight/2
};

var colors = [
	'#2185C5',
	'#7ECEFD',
	'#FFF6E5',
	'#FF7F66',
];

//Event Listeners
addEventListener('mousemove', event => {
	mouse.x = event.clientX;
	mouse.y = event.clientY;

});

addEventListener('resize', () => {
	canvas.width = innerWidth;
	canvas.height = innerHeight;

	init();
});

// Utility Functions

function randomIntFromRange(min,max){
	return Math.floor(Math.random()* (max - min + 1) + min);
}

function randomColor(colors){
	return colors[Math.floor(Math.random()* colors.length)];
}


//Objects 

function Particle(x,y,radius,rad,color){

	//big circle attributes
	this.x = x;
	this.y = y;
	this.radius = radius;
	this.dot_r = 3;
	this.color = color;
	this.width = this.radius/5;
	this.rad = rad;
	this.rad_rate = Math.PI/8;
	this.gearArr = {
		startX:[],startY:[],endX:[],endY:[],outX1:[],outY1:[],outX2:[],outY2:[]
	}
	this.init = function(){
		for(let i = 0; i < 30; i++){
			this.gearArr.startX.push(this.x + this.radius*Math.cos(this.rad));
			this.gearArr.startY.push(this.y + this.radius*Math.sin(this.rad));
			this.gearArr.endX.push(this.x + this.radius*Math.cos(this.rad + this.rad_rate));
			this.gearArr.endY.push(this.y + this.radius*Math.sin(this.rad + this.rad_rate));
			this.gearArr.outX1.push(this.x + (this.radius+this.width)*Math.cos(this.rad + this.rad_rate/4));
			this.gearArr.outY1.push(this.y + (this.radius+this.width)*Math.sin(this.rad + this.rad_rate/4));
			this.gearArr.outX2.push(this.x + (this.radius+this.width)*Math.cos(this.rad + (this.rad_rate/3)*2));
			this.gearArr.outY2.push(this.y + (this.radius+this.width)*Math.sin(this.rad + (this.rad_rate/3)*2));
	
			this.rad += this.rad_rate;
		}
	};
	this.init();
	//backgroud circle
	this.background_circle = () => {
			
	};
	this.draw = () => {
		ctx.beginPath();
		ctx.arc(this.x, this.y,this.radius,0, Math.PI*2, false);
		ctx.fillStyle = this.color;
		ctx.fill();
		ctx.closePath();
		for(let i = 0; i < 30; i++){
			ctx.beginPath();
			ctx.moveTo(this.gearArr.startX[i],this.gearArr.startY[i]);
			ctx.lineTo(this.gearArr.outX1[i],this.gearArr.outY1[i]);
			ctx.lineTo(this.gearArr.outX2[i],this.gearArr.outY2[i]);
			ctx.lineTo(this.gearArr.endX[i],this.gearArr.endY[i]);
			ctx.fillStyle = this.color;
			ctx.fill();
		}
	};	
 }



//Implementation 
function Gear(x,y,r,rad){
	this.x = x;
	this.y = y;
	this.r= r;
	this.rad = rad;
	this.speed = Math.random()*0.05;
	this.color = randomColor(colors);
	this.update = function(){
		let gear = new Particle(this.x,this.y,this.r,this.rad,this.color);
		gear.draw();
		
		this.rad+=this.speed;
	}
}


let test = new Gear(canvas.width/2,canvas.height/2,40,2);

var gears,
	rects,
	filter_rects;

function Rect(x,y,w){
	this.x = x;
	this.y = y;
	this.w = w;
	this.draw = function(){
		ctx.beginPath();
		ctx.strokeRect(this.x,this.y,this.w,this.w);
		ctx.stroke();
	}
}



function init(){
	// gears = [];
	// for(let i = 0; i < 90; i++){
	// let r = randomIntFromRange(30,50),
	// 	x = Math.random()*canvas.width + r,
	// 	y = Math.random()*canvas.height + r,
	//   rad = 0;
	// 	gears.push(new Gear(x,y,r,rad));
	// }
	rects = [];
	filter_rects = [];
	for(let i = 0; i < 500; i++){
		let x = Math.random()*canvas.width,
			y = Math.random()*canvas.height,
			w = randomIntFromRange(canvas.width/15,canvas.width/7);
		rects.push(new Rect(x,y,w));
	}
	// for(let i = 0; i < rects.length; i++){
	// 	if(rects[i+1].x - rects[i].x > rects[i].w){
	// 		filter_rects.push(rects[i+1]);
	// 	}
	// }
	console.log(rects)
}

//Animation loop

function animate(){
	requestAnimationFrame(animate);
	ctx.clearRect(0,0,canvas.width,canvas.height);
	test.update()
;	
}

init();
animate();

</script>
</body>
</html>